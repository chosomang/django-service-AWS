{% load static %}
<link rel="stylesheet" href="{% static '/css/rule_ani.css' %}">
<div class="col-xl">
    <div class='p-2'>
        <h2 class="mb-3 font-weight-bold text-center text-teiren">{{cloud}} 사용자 설정 정책 추가</h2>
        <div class="card-body shadow" style="border-radius:20px;">
            <div id="addbtns" class='row justify-content-center'>
                <button type='button' onclick='staticRule("{{cloud}}");return false' class='btn btn-md btn-outline-teiren mt-4 mr-3' >Static 정책</button>
                <button type='button' onclick='dynamicRule("{{cloud}}");return false' class='btn btn-md btn-outline-teiren mt-4 mr-3' >Dynamic 정책</button>
            </div>
            <div id="new_rules">
            </div>
            <input type='button' value='정책 추가' class="btn btn-teiren btn-block mt-4" onclick=''>
        </div>
    </div>
</div>
<script>
    function staticRule(cloud){
        $.ajax({
            url: '/custom/add/static/',
            headers:{
                'X-CSRFToken': '{{ csrf_token }}'
            },
            type: 'post',
            data:{
                cloud: cloud
            }
        }).done(function(data){
            $('#new_rules').append(data).show()
            $('#rule_static').slideDown('normal')
        })
    }

    function deleteSection(e){
        if(e === 'static'){
            $('#rule_static').slideUp('normal')
            setTimeout(function(){
                $('#rule_static').remove()
            },500)
        }
    }

    function hideSection(count){
        var section = $('#rule_'+String(count))
        section.find('.content').slideUp('normal')
    }

    function addProperty(cloud){
        var count = $('#properties').find('.prop').length + 1
        $.ajax({
            url:'/custom/add/property/',
            headers:{
                'X-CSRFToken': '{{ csrf_token }}'
            },
            type: 'post',
            data:{
                count: count,
                cloud: cloud
            }
        }).done(function(data){
            $('#properties').append(data)
            $('#properties').find('#property'+count).hide().slideDown('normal')
        })
    }
    
    function deleteProperty(count, cloud){
        $('#property'+count).slideUp('normal')
        setTimeout(function(){
            $('#property'+count).remove()
        }, 300)
    }
</script>